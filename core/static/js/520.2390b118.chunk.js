"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[520],{8349:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(2791),r=n(4164),a="Modal_modal_wrapper__MFou9",s=n(184),i=function(e){var t=e.open,n=e.onMouseDown,i=e.children,c=document.querySelector("body"),d=(0,o.useRef)();(0,o.useEffect)((function(){var e=document.querySelector("body");return function(){e.removeAttribute("style")}}),[]),(0,o.useEffect)((function(){var e=document.querySelector("body");t?e.style.overflow="hidden":e.removeAttribute("style")}),[t]);var l=function(e){e.target===d.current&&n()};return(0,r.createPortal)(t?(0,s.jsx)("div",{className:a,onMouseDown:function(e){return l(e)},ref:d,children:i}):(0,s.jsx)(s.Fragment,{}),c)}},2931:function(e,t,n){n.d(t,{Z:function(){return M}});var o=n(2791),r=n(4302),a=n(6156),s=n(5861),i=n(885),c=n(7757),d=n.n(c),l=n(6871),u=n(8660),p=n(3374),f=n(2357),_=n(1932),v=n(4569),m=n.n(v),h=function(){var e=(0,l.UO)(),t=(0,o.useState)("string"===typeof e.id&&"all-posts"!==e.id?Number(e.id):0),n=(0,i.Z)(t,1)[0],r=(0,u.C)((function(e){return e.collectionsReducer})).find((function(e){return e.id===n})),a=null===r||void 0===r?void 0:r.posts.posts,c=(0,o.useState)(Math.floor((null===a||void 0===a?void 0:a.length)/12)),v=(0,i.Z)(c,2),h=v[0],x=v[1],N=null===r||void 0===r?void 0:r.posts.hasNextPage,M=(0,u.T)(),j=(0,o.useRef)(),g=(0,p.Z)((0,s.Z)(d().mark((function e(){var t,o,r,a,s,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,o=_.x.actions,r=o.addPosts,a=o.setHasNextPage,t.append("collection_id",String(n)),t.append("page",String(h)),e.next=6,m().post("http://127.0.0.1:8000/api/collection/get",t);case 6:s=e.sent,i=s.data,M(r({id:n,posts:i.posts})),i.hasNextPage||M(a({id:n,value:i.hasNextPage}));case 10:case"end":return e.stop()}}),e)})))),w=(0,i.Z)(g,3),b=w[0],k=w[1];w[2];return(0,f.Z)(j,k,N,(function(){x((function(e){return e+1}))})),(0,o.useEffect)((function(){b()}),[h]),{posts:a,isFetching:k,hasNextPage:N,lastElement:j}},x=n(274),N=n(184),M=function(){var e=h(),t=e.posts,n=e.hasNextPage,o=e.lastElement;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.Z,{posts:t}),n&&t.length>0&&(0,N.jsx)("div",{className:x.Z.loader,ref:o,children:(0,N.jsx)(a.c,{})})]})}},1787:function(e,t,n){n.d(t,{LU:function(){return p},P4:function(){return u},Yu:function(){return d},bG:function(){return l},iu:function(){return f}});var o=n(5861),r=n(7757),a=n.n(r),s=n(4569),i=n.n(s),c=n(1932),d=function(e){return function(){var t=(0,o.Z)(a().mark((function t(n){var o,r,s,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.x.actions.addCollection,(r=new FormData).append("collection_name",e),t.next=5,i().post("http://127.0.0.1:8000/api/collection/create",r);case 5:s=t.sent,d=s.data,n(o(d));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},l=function(){return function(){var e=(0,o.Z)(a().mark((function e(t){var n,o,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.x.actions.setCollections,e.next=3,i().post("http://127.0.0.1:8000/api/collections/get");case 3:o=e.sent,(r=o.data).length&&t(n(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},u=function(e){return function(){var t=(0,o.Z)(a().mark((function t(n){var o,r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new FormData,r=c.x.actions.removeCollection,o.append("collection_id",String(e)),t.next=5,i().post("http://127.0.0.1:8000/api/collection/delete",o);case 5:s=t.sent,"ok"===s.data.status&&n(r(e));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e,t){return function(){var n=(0,o.Z)(a().mark((function n(o){var r,s,d;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new FormData,s=c.x.actions.renameCollection,r.append("collection_id",String(e)),r.append("collection_name",t),n.next=6,i().post("http://127.0.0.1:8000/api/collection/rename",r);case 6:d=n.sent,"ok"===d.data.status&&o(s({id:Number(e),name:t}));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},f=function(e,t){return function(){var n=(0,o.Z)(a().mark((function n(o){var r,s,d,l,u,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new FormData,s=c.x.actions,d=s.addPosts,l=s.setHasNextPage,r.append("collection_id",String(e)),r.append("page",String(t)),n.next=6,i().post("http://127.0.0.1:8000/api/collection/get",r);case 6:u=n.sent,p=u.data,o(d({id:Number(e),posts:p.posts})),p.hasNextPage||o(l({id:Number(e),value:p.hasNextPage}));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},1520:function(e,t,n){n.r(t),n.d(t,{default:function(){return le}});var o=n(885),r="Posts_container__j1Hl7",a="Posts_empty_body__+Xwd7",s="Posts_body_title__XRORH",i="Posts_subtitle__cV7eg",c="Posts_add_posts_button__Kv530",d=n(2791),l=n(6871),u=n(8660),p=n(8349),f="PostsHeader_wrapper__j7FVB",_="PostsHeader_container__4quul",v="PostsHeader_back__l2BIu",m="PostsHeader_options__MjbYC",h="PostsHeader_title__RUmuD",x=n(3174),N=n(4483),M=n(3504),j=n(184),g=function(e){var t=e.collectionName,n=e.setModalName,o=(0,l.UO)();return(0,j.jsx)("div",{className:f,children:(0,j.jsxs)("div",{className:_,children:[(0,j.jsx)(M.rU,{to:"/saved",className:v,children:(0,j.jsx)(N.G,{icon:x.acZ})}),(0,j.jsx)("div",{className:h,children:t}),"all-posts"!==o.id&&(0,j.jsx)("div",{className:m,onClick:function(){return n("MainModal")},children:(0,j.jsx)(N.G,{icon:x.S6C})})]})})},w=n(2931),b=n(1787),k="MainModal_modal__YNLvA",y="MainModal_modal_option__ijEdK",P="MainModal_modal_option_danger__1Z6Cs",Z=function(e){var t=e.setModalName;return(0,j.jsxs)("div",{className:k,children:[(0,j.jsx)("div",{className:P,onClick:function(){return t("DeleteModal")},children:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438"}),(0,j.jsx)("div",{className:y,onClick:function(){return t("EditModal")},children:"\u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443"}),(0,j.jsx)("div",{className:y,onClick:function(){return t("AddModal")},children:'\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437 "\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u043e\u0433\u043e"'}),(0,j.jsx)("div",{className:y,onClick:function(){return t("")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})},C=n(5861),E=n(7757),S=n.n(E),D="DeleteModal_modal__7MaV+",A="DeleteModal_body__8kWZE",F="DeleteModal_title__H5ygr",H="DeleteModal_subtitle__brPkF",R="DeleteModal_footer__oE-yI",U="DeleteModal_option__s9vio",O="DeleteModal_option_danger__qjHmg",q=function(e){var t=e.setModalName,n=(0,l.UO)().id,o=(0,l.s0)(),r=(0,u.T)(),a=function(){var e=(0,C.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r((0,b.P4)(Number(n))),o("/saved"),t("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:D,children:[(0,j.jsxs)("div",{className:A,children:[(0,j.jsx)("div",{className:F,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443?"}),(0,j.jsx)("div",{className:H,children:"\u0415\u0441\u043b\u0438 \u0432\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u044d\u0442\u0443 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443, \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0432 \u043d\u0435\u0435 \u0444\u043e\u0442\u043e \u0438 \u0432\u0438\u0434\u0435\u043e \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b."})]}),(0,j.jsxs)("div",{className:R,children:[(0,j.jsx)("div",{className:O,onClick:function(){return a()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,j.jsx)("div",{className:U,onClick:function(){return t("MainModal")},children:"\u041d\u0430\u0437\u0430\u0434"})]})]})},L=q,T="EditModal_modal__3zPvq",Y="EditModal_header__Cndq8",I="EditModal_body__bAg4v",G="EditModal_input__0HH9G",B="EditModal_footer__21rJq",X="EditModal_option__p1dp8",V="EditModal_option_next__cYxje",W="EditModal_option_disabled__DMw2+",K="EditModal_separator__qfLHL",z=function(e){var t=e.setModalName,n=(0,l.UO)().id,r=(0,u.C)((function(e){return e.collectionsReducer})).find((function(e){return e.id===("all-posts"===n?0:Number(n))})),a=(0,d.useState)(r.name),s=(0,o.Z)(a,2),i=s[0],c=s[1],p=(0,u.T)(),f=function(){var e=(0,C.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p((0,b.LU)(Number(n),i)),t("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:T,children:[(0,j.jsx)("div",{className:Y,children:"\u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438"}),(0,j.jsx)("div",{className:I,children:(0,j.jsx)("input",{className:G,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438",value:i,onChange:function(e){return c(e.target.value)}})}),(0,j.jsxs)("div",{className:B,children:[(0,j.jsx)("div",{className:X,onClick:function(){return t("MainModal")},children:"\u041d\u0430\u0437\u0430\u0434"}),(0,j.jsx)("div",{className:K}),(0,j.jsx)("div",{className:"".concat(i.length?V:W),onClick:function(){return f()},children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]})]})},J=z,Q=n(2982),$=n(7762),ee=n(4569),te=n.n(ee),ne=function(){return(0,j.jsx)("svg",{color:"#ffffff",fill:"#ffffff",height:"64",role:"img",viewBox:"0 0 24 24",width:"64",children:(0,j.jsx)("polyline",{fill:"none",points:"21.648 5.352 9.002 17.998 2.358 11.358",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3"})})},oe=n(1932),re=n(6156),ae=n(3374),se=n(2357),ie={modal:"AddModal_modal__XfI7P",show_modal:"AddModal_show_modal__p5EtY",header:"AddModal_header__6rMr5",body:"AddModal_body__qLNRD",post:"AddModal_post__bvYXo",post_wrapper:"AddModal_post_wrapper__5yUiT",post_wrapper_active:"AddModal_post_wrapper_active__CTjTv",footer:"AddModal_footer__6Urk1",option:"AddModal_option__yB3EP",option_next:"AddModal_option_next__Nn97b",option_disabled:"AddModal_option_disabled__yHW17",separator:"AddModal_separator__YrSNP"},ce=function(e){var t=e.setModalName,n=(0,l.UO)(),r=(0,d.useState)("string"===typeof n.id&&"all-posts"!==n.id?Number(n.id):0),a=(0,o.Z)(r,1)[0],s=(0,d.useState)([]),i=(0,o.Z)(s,2),c=i[0],p=i[1],f=(0,d.useRef)(),_=(0,u.T)(),v=(0,u.C)((function(e){return e.collectionsReducer.find((function(e){return e.id===Number(a)}))})),m=(0,u.C)((function(e){return e.collectionsReducer.find((function(e){return 0===e.id}))})),h=null===m||void 0===m?void 0:m.posts.posts,x=(0,d.useState)(Math.floor((null===h||void 0===h?void 0:h.length)/12)),N=(0,o.Z)(x,2),M=N[0],g=N[1],w=null===m||void 0===m?void 0:m.posts.hasNextPage,b=oe.x.actions,k=b.setPosts,y=b.setImage,P=(0,d.useRef)();(0,d.useEffect)((function(){var e,t=[],n=(0,$.Z)(null===v||void 0===v?void 0:v.posts.posts);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.push(o.id)}}catch(r){n.e(r)}finally{n.f()}p(t)}),[]);var Z=(0,ae.Z)((0,C.Z)(S().mark((function e(){var t,n,o,r,a,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,n=oe.x.actions,o=n.addPosts,r=n.setHasNextPage,t.append("collection_id",String(0)),t.append("page",String(M)),e.next=6,te().post("http://127.0.0.1:8000/api/collection/get",t);case 6:a=e.sent,s=a.data,_(o({id:0,posts:s.posts})),s.hasNextPage||_(r({id:0,value:s.hasNextPage}));case 10:case"end":return e.stop()}}),e)})))),E=(0,o.Z)(Z,3),D=E[0],A=E[1];E[2];(0,se.Z)(P,A,w,(function(){g((function(e){return e+1}))})),(0,d.useEffect)((function(){D()}),[M]);var F=function(){var e=(0,C.Z)(S().mark((function e(){var n,o,r,s,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.filter((function(e){return-1!==c.indexOf(e.id)})).reverse(),s=null!==(n=null===(o=r[0])||void 0===o?void 0:o.images[0])&&void 0!==n?n:"",_(k({id:Number(a),posts:r})),_(y({collectionId:Number(a),image:s})),t(""),(i=new FormData).append("collection_id",String(a)),i.append("posts_id",String(c)),e.next=10,te().post("http://127.0.0.1:8000/api/collection/edit",i);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:ie.modal,children:[(0,j.jsx)("div",{className:ie.header,children:'\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437 "\u0421\u043e\u0445\u0440\u043d\u0430\u043d\u0451\u043d\u043d\u043e\u0433\u043e"'}),(0,j.jsx)("div",{className:ie.body,ref:f,children:h&&h.map((function(e,t){return(0,j.jsx)("div",{className:ie.post,style:{backgroundImage:"url(http://127.0.0.1:8000".concat(e.images[0],")")},onClick:function(){return function(e){-1===c.indexOf(e)?p([].concat((0,Q.Z)(c),[e])):p(c.filter((function(t){return t!==e})))}(e.id)},children:(0,j.jsx)("div",{className:-1!==c.indexOf(e.id)?ie.post_wrapper_active:ie.post_wrapper,children:-1!==c.indexOf(e.id)&&(0,j.jsx)(ne,{})})},t)}))}),w&&h.length>0&&(0,j.jsx)("div",{className:ie.loader,ref:P,children:(0,j.jsx)(re.c,{})}),(0,j.jsxs)("div",{className:ie.footer,children:[(0,j.jsx)("div",{className:ie.option,onClick:function(){return t("MainModal")},children:"\u041d\u0430\u0437\u0430\u0434"}),(0,j.jsx)("div",{className:ie.separator}),(0,j.jsx)("div",{className:ie.option_next,onClick:function(){return F()},children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]})]})},de=ce,le=function(){var e=(0,l.UO)(),t=(0,d.useState)("all-posts"===e.id?0:Number(e.id)),n=(0,o.Z)(t,1)[0],f=(0,u.C)((function(e){return e.collectionsReducer})),_=f.find((function(e){return e.id===n})),v=(0,u.T)(),m=(0,d.useState)(""),h=(0,o.Z)(m,2),x=h[0],N=h[1],M=(0,d.useMemo)((function(){switch(x){case"MainModal":return(0,j.jsx)(Z,{setModalName:N});case"DeleteModal":return(0,j.jsx)(L,{setModalName:N});case"EditModal":return(0,j.jsx)(J,{setModalName:N});case"AddModal":return(0,j.jsx)(de,{setModalName:N});default:return(0,j.jsx)(j.Fragment,{})}}),[x]);return(0,d.useEffect)((function(){f.length||v((0,b.bG)())}),[]),(0,j.jsx)(j.Fragment,{children:_&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g,{collectionName:null===_||void 0===_?void 0:_.name,setModalName:N}),(0,j.jsxs)("div",{className:r,children:[_.posts.posts&&(0,j.jsx)(w.Z,{}),0===_.posts.posts.length&&!1===_.posts.hasNextPage&&(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("div",{className:s,children:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c"}),(0,j.jsx)("div",{className:i,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u0444\u043e\u0442\u043e \u0438 \u0432\u0438\u0434\u0435\u043e \u0432 \u0432\u0430\u0448\u0443 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443."}),(0,j.jsx)("div",{className:c,onClick:function(){return N("AddModal")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443"})]})]}),(0,j.jsx)(p.Z,{open:!!x.length,onMouseDown:function(){return N("")},children:M})]})})}}}]);
//# sourceMappingURL=520.2390b118.chunk.js.map