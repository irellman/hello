{"version":3,"file":"static/js/15.eb08db0b.chunk.js","mappings":"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","sources":["webpack://frontend/./src/pages/ProfileEdit/ProfileEdit.module.scss?2754","webpack://frontend/./src/pages/ProfileEdit/Avatar/Avatar.module.scss?3068","pages/ProfileEdit/Avatar/Avatar.tsx","pages/ProfileEdit/Avatar/index.ts","webpack://frontend/./src/pages/ProfileEdit/Input/Input.module.scss?b5fe","pages/ProfileEdit/Input/index.ts","pages/ProfileEdit/Input/Input.tsx","webpack://frontend/./src/pages/ProfileEdit/Textarea/Textarea.module.scss?ee8a","pages/ProfileEdit/Textarea/index.ts","pages/ProfileEdit/Textarea/Textarea.tsx","pages/ProfileEdit/ProfileEdit.tsx","pages/ProfileEdit/index.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ProfileEdit_container__2X8I2\",\"body\":\"ProfileEdit_body__vOKWe\",\"footer\":\"ProfileEdit_footer__Zb6it\",\"button\":\"ProfileEdit_button__W2mYD\",\"button_red\":\"ProfileEdit_button_red__If3DS\",\"button_disable\":\"ProfileEdit_button_disable__RtV0K\",\"password_separator\":\"ProfileEdit_password_separator__g9YPe\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Avatar_container__YP8+C\",\"avatar\":\"Avatar_avatar__Q6d+q\",\"file_input\":\"Avatar_file_input__8O-ON\"};","import {useAppDispatch, useAppSelector} from \"hooks/redux\";\nimport axios from \"axios\";\nimport {authReducer} from \"context/auth/reducer\";\nimport styles from \"./Avatar.module.scss\";\n\nconst Avatar = () => {\n  const user = useAppSelector(state => state.authReducer.user)!;\n  const dispatch = useAppDispatch();\n  const { setAvatar } = authReducer.actions;\n\n  const changeAvatar = async (e: any) => {\n    const file = e.target.files[0];\n\n    const formData = new FormData();\n    formData.append(\"avatar\", file);\n\n    const res = await axios.post(\"http://127.0.0.1:8000/user/avatar\", formData);\n    const data = res.data;\n\n    if (data.avatar) {\n      dispatch(setAvatar(data.avatar));\n      const userToChange = JSON.parse(localStorage.getItem(\"user\")!);\n      userToChange.avatar = data.avatar;\n      localStorage.setItem(\"user\", JSON.stringify(userToChange));\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      <div\n        className={styles.avatar}\n        style={{backgroundImage: `url(http://127.0.0.1:8000${user.avatar})`}}\n      >\n        <input\n          className={styles.file_input}\n          onChange={(e) => changeAvatar(e)}\n          type=\"file\"\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Avatar;\n","import Avatar from \"./Avatar\";\n\nexport default Avatar;\n","// extracted by mini-css-extract-plugin\nexport default {\"block\":\"Input_block__8GfX3\",\"label\":\"Input_label__Q2z5f\",\"input\":\"Input_input__pVT7B\"};","import Input from \"./Input\";\n\nexport default Input;\n","import React, {FC} from \"react\";\nimport styles from \"./Input.module.scss\";\n\ninterface props {\n  value: string,\n  handler: (value: string) => void,\n  label: string\n}\n\nconst Input: FC<props> = ({ value, handler, label }) => {\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    handler(e.target.value);\n  }\n\n  return (\n    <div className={styles.block}>\n      <div className={styles.label}>{label}</div>\n      <input\n        className={styles.input}\n        value={value}\n        onChange={onChange}\n        placeholder={label}\n      />\n    </div>\n  )\n}\n\nexport default Input;\n","// extracted by mini-css-extract-plugin\nexport default {\"block\":\"Textarea_block__iE0Fd\",\"label\":\"Textarea_label__m0Kwu\",\"textarea\":\"Textarea_textarea__8u0wO\"};","import Textarea from \"./Textarea\";\n\nexport default Textarea;\n","import React, {FC} from \"react\";\nimport styles from \"./Textarea.module.scss\";\n\ninterface props {\n  value: string,\n  handler: (value: string) => void,\n  label: string\n}\n\nconst Textarea: FC<props>  = ({ value, handler, label }) => {\n  const onChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    handler(e.target.value);\n  }\n\n  return (\n    <div className={styles.block}>\n      <div className={styles.label}>О себе</div>\n      <textarea\n        className={styles.textarea}\n        value={value}\n        onChange={onChange}\n        placeholder=\"Пара слов о себе\"\n      />\n    </div>\n  )\n}\n\nexport default Textarea;\n","import {FC, useMemo, useState} from \"react\";\nimport {useAppDispatch, useAppSelector} from \"hooks/redux\";\nimport styles from \"./ProfileEdit.module.scss\"\nimport axios from \"axios\";\nimport {useNavigate} from \"react-router-dom\";\nimport Avatar from \"./Avatar\";\nimport Input from \"./Input\";\nimport Textarea from \"./Textarea\";\nimport {authReducer} from \"context/auth/reducer\";\nimport {userReducer} from \"context/userReducer/reducer\";\n\nconst ProfileEdit: FC = () => {\n  const user = useAppSelector(state => state.authReducer.user!);\n  const [username, setUsername] = useState<string>(user.username);\n  const [name, setName] = useState<string>(user.name);\n  const [email, setEmail] = useState<string>(user.email);\n  const [website, setWebsite] = useState<string>(user.website);\n  const [about, setAbout] = useState<string>(user.about);\n\n  const dispatch = useAppDispatch();\n  const { setAuthUser } = authReducer.actions;\n  const { clearUser } = userReducer.actions;\n  const navigate = useNavigate();\n\n  const submitButtonIsDisable = useMemo(() => {\n    if (username !== user.username) {\n      return false;\n    }\n\n    if (name !== user.name) {\n      return false;\n    }\n\n    if (email !== user.email) {\n      return false;\n    }\n\n    if (website !== user.website) {\n      return false;\n    }\n\n    if (about !== user.about) {\n      return false;\n    }\n\n    return true;\n  }, [username, name, email, website, about])\n\n  const submit = async () => {\n    if(submitButtonIsDisable) {\n      return;\n    }\n\n    const formData = new FormData();\n\n    if (username !== user.username) {\n      formData.append(\"username\", username);\n    }\n\n    if (name !== user.name) {\n      formData.append(\"name\", name);\n    }\n\n    if (email !== user.email) {\n      formData.append(\"email\", email);\n    }\n\n    if (website !== user.website) {\n      formData.append(\"name\", website);\n    }\n\n    if (about !== user.about) {\n      formData.append(\"about\", about);\n    }\n\n    const res = await axios.post(\"http://127.0.0.1:8000/user/edit\", formData);\n    const data = res.data;\n\n    if (data.status === \"ok\") {\n      const userToChange = JSON.parse(localStorage.getItem(\"user\")!);\n      if (userToChange.username !== username) {\n        userToChange.username = username;\n        localStorage.setItem(\"user\", JSON.stringify(userToChange));\n      }\n\n      dispatch(clearUser());\n      dispatch(setAuthUser(userToChange));\n      navigate(`/profile/${user.username}`);\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.body}>\n        <Avatar />\n        <Input value={username} handler={setUsername} label=\"Имя пользователя\" />\n        <Input value={name} handler={setName} label=\"Имя\" />\n        <Input value={email} handler={setEmail} label=\"Электронный адрес\" />\n        <Input value={website} handler={setWebsite} label=\"Веб-сайт\" />\n        <Textarea value={about} handler={setAbout} label=\"Пара слов о себе\" />\n      </div>\n      <div className={styles.footer}>\n        <div\n          className={submitButtonIsDisable ? styles.button_disable : styles.button}\n          onClick={() => submit()}\n        >Сохранить</div>\n        <div className={styles.button_red}>Удалить аккаунт</div>\n      </div>\n    </div>\n  );\n}\n\nexport default ProfileEdit;\n","import ProfileEdit from \"./ProfileEdit\";\n\nexport default ProfileEdit;\n"],"names":["user","useAppSelector","state","authReducer","dispatch","useAppDispatch","setAvatar","changeAvatar","e","file","target","files","formData","FormData","append","axios","res","data","avatar","userToChange","JSON","parse","localStorage","getItem","setItem","stringify","className","styles","style","backgroundImage","onChange","type","value","handler","label","placeholder","useState","username","setUsername","name","setName","email","setEmail","website","setWebsite","about","setAbout","setAuthUser","clearUser","userReducer","navigate","useNavigate","submitButtonIsDisable","useMemo","submit","status","onClick"],"sourceRoot":""}