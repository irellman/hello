{"version":3,"file":"static/js/98.d1d65e96.chunk.js","mappings":"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","sources":["api/app.ts","webpack://frontend/./src/components/Header/DesktopHeader/HeaderSearchDropdownItem/HeaderSearchDropdownItem.module.scss?472c","api/recentSearch.ts","components/Header/DesktopHeader/HeaderSearchDropdownItem/index.ts","components/Header/DesktopHeader/HeaderSearchDropdownItem/HeaderSearchDropdownItem.tsx","webpack://frontend/./src/components/Header/DesktopHeader/HeaderSearchDropdown/HeaderSearchDropdown.module.scss?2e9e","components/Header/DesktopHeader/HeaderSearchDropdown/HeaderSearchDropdown.tsx","components/Header/DesktopHeader/HeaderSearchDropdown/index.ts"],"sourcesContent":["import axios from 'axios';\n\nexport const searchUsersOrTags = async (query: string) => {\n  const formData = new FormData();\n\n  formData.append(\"query\", query);\n\n  return await axios.post(\"http://127.0.0.1:8000/api/search\", formData)\n}","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"HeaderSearchDropdownItem_item__WCsco\",\"image\":\"HeaderSearchDropdownItem_image__Cwt2C\",\"info\":\"HeaderSearchDropdownItem_info__z1Spk\",\"title\":\"HeaderSearchDropdownItem_title__vYh4L\",\"subtitle\":\"HeaderSearchDropdownItem_subtitle__AdMm-\"};","import axios from 'axios';\n\nexport const FetchToUpdateRecentSearches = async (query: string) => {\n  const formData = new FormData();\n  formData.append(\"query\", query)\n  await axios.post(`http://127.0.0.1:8000/api/recent_searches/update`, formData);\n}\n\nexport const FetchToDeleteRecentSearch = async (query: string) => {\n  const formData = new FormData();\n  formData.append(\"query\", query)\n  await axios.post(`http://127.0.0.1:8000/api/recent_searches/delete`, formData);\n}\n\nexport const FetchToAddRecentSearch = async (query: string) => {\n  const formData = new FormData();\n  formData.append(\"query\", query)\n  await axios.post(`http://127.0.0.1:8000/api/recent_searches/add`, formData);\n}\n\nexport const FetchToClearRecentSearch = async () => {\n  await axios.post(`http://127.0.0.1:8000/api/recent_searches/clear`);\n}\n","import HeaderSearchDropdownItem from \"./HeaderSearchDropdownItem\";\n\nexport default HeaderSearchDropdownItem;","import { FC } from \"react\";\nimport { CrossIcon } from \"components/icons/CrossIcon\";\nimport styles from \"./HeaderSearchDropdownItem.module.scss\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FetchToAddRecentSearch, FetchToDeleteRecentSearch, FetchToUpdateRecentSearches } from \"api/recentSearch\";\nimport {useAppDispatch, useAppSelector} from \"hooks/redux\";\nimport {recentSearchReducer} from \"context/recentSearchReducer\";\n\ninterface props {\n  image: string,\n  title: string,\n  subtitle: string,\n  canRemove: boolean,\n  setIsFocused: (value: boolean) => void\n}\n\nexport const HeaderSearchDropdownItem: FC<props> = ({ image, title, subtitle, canRemove, setIsFocused }) => {\n  const recentSearches = useAppSelector(state => state.recentSearchReducer);\n  const navigate = useNavigate();\n  const dispatch = useAppDispatch();\n\n  const { updateRecentSearches, addRecentSearch, deleteRecentSearch } = recentSearchReducer.actions;\n\n  const addAndNavigate = (value: string) => {\n    setIsFocused(false);\n    \n    if (value[0] === \"#\") {\n      navigate(`/explore?tag=${value.replace(\"#\", \"\")}`);\n    } else {\n      navigate(`/profile/${value}`);\n    }\n\n    if (recentSearches.find((item: any) => {return item.title === value})) {\n      FetchToUpdateRecentSearches(value);\n      setTimeout(() => {\n        dispatch(updateRecentSearches(value));\n      }, 250)\n    } else {\n      dispatch(addRecentSearch({image: image, title: title, subtitle: subtitle}));\n      FetchToAddRecentSearch(value);\n    }\n  }\n\n  const remove = (e: MouseEvent, value: string) => {\n    e.stopPropagation();\n    FetchToDeleteRecentSearch(value);\n    dispatch(deleteRecentSearch(value));\n  }\n\n  return (\n    <div className={styles.item} onClick={() => addAndNavigate(title)}>\n      <div className={styles.image} style={{backgroundImage: `url(http://127.0.0.1:8000${image})`}} />\n      <div className={styles.info}>\n        <div className={styles.title}>{title}</div>\n        <div className={styles.subtitle}>{subtitle}</div>\n      </div>\n      {canRemove &&\n        <CrossIcon\n          size={16}\n          color={\"rgb(140, 140, 140)\"}\n          onClick={(e: MouseEvent) => remove(e, title)}\n        />\n      }\n    </div>\n  );\n}\n\nexport default HeaderSearchDropdownItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"dropdown\":\"HeaderSearchDropdown_dropdown__1Dq1v\",\"dropdown_active\":\"HeaderSearchDropdown_dropdown_active__c43A7\",\"header\":\"HeaderSearchDropdown_header__hQVZD\",\"title\":\"HeaderSearchDropdown_title__IdV5C\",\"clear\":\"HeaderSearchDropdown_clear__aVROX\",\"list\":\"HeaderSearchDropdown_list__F+U1o\",\"label\":\"HeaderSearchDropdown_label__zez2m\"};","import { searchUsersOrTags } from \"api/app\";\nimport HeaderSearchDropdownItem from \"../HeaderSearchDropdownItem\";\nimport { LoaderIcon } from \"components/icons/LoaderIcon\";\nimport { recentSearchReducer } from \"context/recentSearchReducer\";\nimport {useAppDispatch, useAppSelector} from \"hooks/redux\";\nimport { FC, useEffect, useState } from \"react\";\n\nimport styles from \"./HeaderSearchDropdown.module.scss\";\nimport axios from \"axios\";\nimport {FetchToClearRecentSearch} from \"api/recentSearch\";\n\ninterface recentSearch {\n  image: string,\n  title: string,\n  subtitle: string\n}\n\ninterface props {\n  query: string,\n  isActive: boolean,\n  setIsFocused: (value: boolean) => void\n}\n\nconst HeaderSearchDropdown: FC<props> = ({ query, isActive, setIsFocused }) => {\n  const recentSearches = useAppSelector(state => state.recentSearchReducer);\n  const [result, setResult] = useState<recentSearch[]>([]);\n  const [searchTimeout, setSearchTimeout] = useState<any>();\n  const [isFetching, setIsFetching] = useState<boolean>(false);\n\n  const { setRecentSearches, clearRecentSearches } = recentSearchReducer.actions;\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    async function getRecentSearches() {\n      const formData = new FormData();\n      const res = await axios.post(\"http://127.0.0.1:8000/api/recent_searches/get\", formData);\n      const data = res.data;\n\n      if (!data.status) {\n        dispatch(setRecentSearches(data));\n      }\n    }\n\n    getRecentSearches();\n  }, []);\n\n  useEffect(() => {\n    if (query) {\n      search();\n    } else {\n      setResult([]);\n    }\n  }, [query]);\n\n  const search = async () => {\n    setIsFetching(true);\n    clearTimeout(searchTimeout);\n\n    setSearchTimeout(setTimeout(async () => {\n      const res = await searchUsersOrTags(query);\n      setResult(res.data);\n      setIsFetching(false);\n    }, 500));\n  }\n\n  const clear = () => {\n    FetchToClearRecentSearch();\n    dispatch(clearRecentSearches());\n  }\n\n  return (\n    <div className={isActive ? styles.dropdown_active : styles.dropdown}>\n      {!query &&\n        <div className={styles.header}>\n          <div className={styles.title}>Недавние</div>\n          {recentSearches.length ?\n            <div className={styles.clear} onClick={() => clear()}>Очистить</div>\n            :\n            <></>\n          }\n        </div>\n      }\n      <div className={styles.list}>\n        {!isFetching ?\n          query.length ?\n            result.length ?\n              result.map((item: recentSearch, index: number) => {\n                return (\n                  <HeaderSearchDropdownItem\n                    image={item.image}\n                    title={item.title}\n                    subtitle={item.subtitle}\n                    canRemove={false}\n                    setIsFocused={setIsFocused}\n                    key={index}\n                  />\n                );\n              })\n              :\n              <div className={styles.label}>Ничего не найдено</div>\n            :\n            recentSearches.length ?\n              recentSearches.map((item: recentSearch, index: number) => {\n                return (\n                  <HeaderSearchDropdownItem\n                    image={item.image}\n                    title={item.title}\n                    subtitle={item.subtitle}\n                    setIsFocused={setIsFocused}\n                    canRemove\n                    key={index}\n                  />\n                );\n              })\n            :\n            <div className={styles.label}>Нет недавних запросов</div>\n          :\n          <div className={styles.label}>\n            <LoaderIcon />\n          </div>\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default HeaderSearchDropdown;\n","import HeaderSearchDropdown from \"./HeaderSearchDropdown\";\n\nexport default HeaderSearchDropdown;"],"names":["searchUsersOrTags","query","formData","FormData","append","axios","FetchToUpdateRecentSearches","FetchToDeleteRecentSearch","FetchToAddRecentSearch","FetchToClearRecentSearch","image","title","subtitle","canRemove","setIsFocused","recentSearches","useAppSelector","state","recentSearchReducer","navigate","useNavigate","dispatch","useAppDispatch","updateRecentSearches","addRecentSearch","deleteRecentSearch","className","styles","onClick","value","replace","find","item","setTimeout","style","backgroundImage","CrossIcon","size","color","e","stopPropagation","remove","isActive","useState","result","setResult","searchTimeout","setSearchTimeout","isFetching","setIsFetching","setRecentSearches","clearRecentSearches","useEffect","res","data","status","getRecentSearches","search","clearTimeout","length","LoaderIcon","map","index"],"sourceRoot":""}